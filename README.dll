Creating and using a DLL
* Creating a DLL
* Using the DLL


Creating a DLL
There are multiple methods of creating a DLL:
* using Cygwin
* using Microsoft Visual Studio C++
* using MingW


Creating a DLL using Cygwin
To create a DLL using Cygwin you'll need:
Cygwin with the following packages:
* binutils
* gcc-core
* bison (for libodraw)
* flex (for libodraw)
* autoconf
* automake
* make
* libtool
* gettext
* libiconv
* openssl-devel (optional but recommended)
* libuuid-devel (optional but recommended)

Building the library:
./configure
make library

You should end up with the following DLL:
libnk2-<version>/libnk2/.libs/cygnk2-0.dll

Older versions of Cygwin might require e2fsprogs for libuuid support
Install the e2fsprogs package and run the commands as following:
LDFLAGS=-L/usr/lib/e2fsprogs ./configure
make library


Creating a DLL using Microsoft Visual Studio C++
To create a DLL using Microsoft Visual Studio C++ you'll need:
* Microsoft Visual Studio C++
  The provided Visual Studio project files were created using
  the 2008 express version. The express verion is available on the
  Microsoft website
* Microsoft Windows SDK (if not already included) for the Windows Crypto API
  The Windows SDK is available on the Microsoft website

Make sure to check if your build environment defines the correct WINVER for your build.
The code uses WINAPI version specific functions based on WINVER.
You can define a custom WINVER in the Microsoft Visual Studio C++ project files or in libnk2-<version>/common/config_msc.h

You should be able to build the DLL using the provided project files.
Note that the project files contain a Release and VSDebug configuration.

If you want to create your own Microsoft Visual Studio project files note that libnk2 needs
to be compiled with the parameter /MD, because stderr is passed from the executables.


Creating a DLL using MingW
To create a DLL using MingW see README.mingw

You should end up with the following DLL:
libnk2/.libs/libnk2-<version>.dll


Using the DLL
Make sure you use define LIBNK2_DLL_IMPORT before including <libnk2.h>,

When the DLL was build with Microsoft Visual Studio, you'll also need the Microsoft Visual Studio redistributable DLLs
to run on other platforms than the build platform.

